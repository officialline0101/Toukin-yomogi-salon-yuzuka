<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ </title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding-top: 5px;
            overflow-x: hidden;
        }

        .container {
            background-color: #fdfdfd;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 96%;
            max-width: 500px;
            padding: 25px;
            box-sizing: border-box;
            margin: 0 auto;
            margin-bottom: 50px;
        }

        h1 {
            background: linear-gradient(135deg, #45c4b7, #45c4b7);
            color: white;
            padding: 20px;
            border-radius: 0 0px 0px 0px;
            text-align: center;
            display: block;
            margin: -20px -15px 20px -15px;
            font-size: 26px;
            font-weight: 100;
            box-shadow: inset 0 -5px 10px rgba(0, 0, 0, 0.05);
        }

        .small-text {
            font-size: 16px;
            display: block;
            margin-bottom: 5px;
        }

        /* ãƒ©ãƒ™ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« */
        .label, .labelkibounitizi, .labeltyuuou, .labelmessezi {
            display: block;
            margin-bottom: 15px;
            padding: 5px;
            font-weight: 400;
            background-color: #45c4b7;
            color: #ffffff;
            font-size: 18px;
            text-align: center;
            border-top: 1px solid black;
            border-bottom: 1px solid black;
        }
        
        .labelkibounitizi { margin: 20px 0 10px 0; }

        /* â–¼â–¼â–¼ ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« â–¼â–¼â–¼ */
        .category-toggle {
            width: 100%;
            background-color: #333;
            color: #fff;
            padding: 15px;
            text-align: left;
            border: none;
            outline: none;
            cursor: pointer;
            font-size: 18px;
            margin-top: 15px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .category-toggle:hover {
            opacity: 0.9;
        }

        /* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãŒé–‹ã„ã¦ã„ã‚‹æ™‚ */
        .category-toggle.active-accordion {
            background-color: #555; 
        }

        /* ä¸­èº«ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .category-toggle.has-selection {
            background-color: #e0f7fa; /* è–„ã„æ°´è‰² */
            color: #004d40; /* æ¿ƒã„ç·‘æ–‡å­— */
            border: 1px solid #45c4b7;
            font-weight: bold;
        }

        /* ã€Œé¸æŠä¸­ã€ãƒãƒƒã‚¸ */
        .selection-badge {
            display: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯éè¡¨ç¤º */
            font-size: 0.7em;
            background-color: #45c4b7;
            color: #fff;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
            vertical-align: middle;
        }

        /* é¸æŠã•ã‚Œã¦ã„ã‚‹æ™‚ã ã‘ãƒãƒƒã‚¸ã‚’è¡¨ç¤º */
        .category-toggle.has-selection .selection-badge {
            display: inline-block;
        }
        /* é¸æŠã•ã‚Œã¦ã„ã‚‹æ™‚ã®ã‚¢ã‚¤ã‚³ãƒ³è‰² */
        .category-toggle.has-selection i {
            color: #45c4b7;
        }

        .category-content {
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
            padding: 15px 10px;
            border: 1px solid #ddd;
            border-top: none;
            background: #fdfdfd;
            border-radius: 0 0 5px 5px;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .sub-label {
            color: #45c4b7;
            border-bottom: 2px solid #45c4b7;
            margin: 15px 0 10px 0;
            font-weight: bold;
            display: inline-block;
        }
        /* â–²â–²â–² ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« â–²â–²â–² */

        /* å¿…é ˆãƒãƒ¼ã‚¯ */
        .required {
            color: #ffffff;
            font-size: 0.6em;
            margin-left: 8px;
            background-color: rgb(255, 15, 15);
            padding: 2px 6px;
            border-radius: 3px;
            vertical-align: middle;
        }

        /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  */
        input[type="text"], input[type="tel"], textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #555555;
            border-radius: 3px;
            box-sizing: border-box;
            font-size: 16px;
        }

        input:focus, textarea:focus, select:focus {
            border-color: #45c4b7;
            outline: none;
            box-shadow: 0 0 5px rgba(69, 196, 183, 0.5);
        }

        /* ãƒœã‚¿ãƒ³ç¾¤ */
        .visit-buttons, .menu-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .visit-buttons button, .menu-buttons button {
            flex: 1 1 45%; /* 2åˆ—è¡¨ç¤º */
            padding: 12px;
            border: 1px solid #2e2e2e;
            border-radius: 4px;
            background-color: #f7f7f7;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            color: #333;
        }

        .visit-buttons button.active, .menu-buttons button.active {
            background-color: #3e3f41;
            color: #fff;
            border-color: #000;
            font-weight: bold;
            transform: scale(0.98);
        }

        /* æ—¥æ™‚é¸æŠã‚¨ãƒªã‚¢ */
        .datetime-wrapper {
            margin-bottom: 15px;
        }
        .dt-grid {
            display: flex;
            gap: 10px;
        }
        .datetime-input {
            flex: 1;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #333;
            border-radius: 4px;
            background: #fff;
            color: #333;
        }
        .placeholder {
            display: block;
            color: #666;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        /* ç¢ºèªã‚¨ãƒªã‚¢ */
        #displayInfo {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-size: 15px;
            line-height: 1.6;
        }
        .info-row {
            margin-bottom: 10px;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 10px;
        }
        .info-row:last-child {
            border-bottom: none;
        }
        .info-label {
            color: #45c4b7;
            font-weight: bold;
        }

        /* é€ä¿¡ãƒœã‚¿ãƒ³ */
        .submit-button {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background-color: #45c4b7;
            color: #fff;
            border: none;
            border-radius: 6px;
            margin-top: 20px;
            cursor: pointer;
        }
        .submit-button:hover {
            opacity: 0.9;
        }

        /* ä¿®æ­£ãƒœã‚¿ãƒ³ */
        .edit-button {
            float: right;
            background: #fff;
            border: 1px solid #333;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>
            <span class="small-text">åº—èˆ—å</span>
            äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ 
        </h1>

        <div class="label" id="lbl_name">ãŠå®¢æ§˜å<span class="required">å¿…é ˆ</span></div>
        <input type="text" id="name" placeholder="ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" oninput="updateDisplayInfo()">

        <div class="label" id="lbl_phone">é›»è©±ç•ªå·<span class="required">å¿…é ˆ</span></div>
        <input type="tel" id="phone" placeholder="é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" oninput="updateDisplayInfo()">

        <div class="label" id="lbl_visit">ã”æ¥åº—å›æ•°<span class="required">å¿…é ˆ</span></div>
        <div class="visit-buttons">
            <button type="button" onclick="selectVisit(this)">æ–°è¦</button>
            <button type="button" onclick="selectVisit(this)">ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼</button>
            <button type="button" onclick="selectVisit(this)">ãƒ¡ãƒ³ãƒãƒ¼ä¼šå“¡</button>
        </div>

        <div class="label" id="lbl_menu">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãŠé¸ã³ãã ã•ã„<span class="required">å¿…é ˆ</span></div>
        <div style="text-align: center; font-size: 0.8em; color: #666; margin-bottom: 5px;">
            ã”å¸Œæœ›ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„<br>ï¼ˆè¤‡æ•°é¸æŠå¯èƒ½ã§ã™ï¼‰
        </div>

        <button class="category-toggle" onclick="toggleCategory('cat-lymph')">
            <span>ãƒªãƒ³ãƒ‘ã‚±ã‚¢ <span class="selection-badge">é¸æŠä¸­</span></span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="cat-lymph" class="category-content">
            <div class="sub-label">ğŸ”¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">æ¥µä¸Šå²©ç›¤ãƒªãƒ³ãƒ‘ã‚±ã‚¢ï¼ˆ130åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">æ¥µä¸Šå²©ç›¤ãƒªãƒ³ãƒ‘ã‚±ã‚¢ï¼ˆ100åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">æ¥µä¸Šå²©ç›¤ãƒªãƒ³ãƒ‘ã‚±ã‚¢ï¼ˆ70åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">å…¨èº«ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚±ã‚¢ã‚³ãƒ¼ã‚¹ï¼ˆ160åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è‡ªç”±ã«ã‚»ãƒ¬ã‚¯ãƒˆã‚³ãƒ¼ã‚¹ï¼ˆ120åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">æ¸©æ´»å¼•ãç· ã‚ãƒœãƒ‡ã‚£ãƒ¼ã‚³ãƒ¼ã‚¹ï¼ˆ120åˆ†ï¼‰</button>
            </div>
            <div class="sub-label">ğŸ”¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ã‚ˆã‚‚ãè’¸ã—ï¼ˆ40åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ20åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ60åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è¶³ãƒ„ãƒœï¼ˆ15åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ•ãƒƒãƒˆãƒªãƒ•ãƒ¬ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">å²©ç›¤æµ´ï¼†ãƒ›ãƒƒãƒˆã‚¹ãƒˆãƒ¼ãƒ³ï¼ˆ30åˆ†ï¼‰</button>
            </div>
        </div>

        <button class="category-toggle" onclick="toggleCategory('cat-head')">
            <span>ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ <span class="selection-badge">é¸æŠä¸­</span></span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="cat-head" class="category-content">
            <div class="sub-label">ğŸ”¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ50åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ˜ãƒƒãƒ‰ï¼†ã‚‚ã¿ã»ãã—ã‚³ãƒ¼ã‚¹ï¼ˆ110åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è‡ªç”±ã«ã‚»ãƒ¬ã‚¯ãƒˆã‚³ãƒ¼ã‚¹ï¼ˆ120åˆ†ï¼‰</button>
            </div>
            <div class="sub-label">ğŸ”¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ã‚ˆã‚‚ãè’¸ã—ï¼ˆ40åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">å²©ç›¤æµ´ï¼†ãƒ›ãƒƒãƒˆã‚¹ãƒˆãƒ¼ãƒ³ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è¶³ãƒ„ãƒœï¼ˆ15åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ•ãƒƒãƒˆãƒªãƒ•ãƒ¬ï¼ˆ30åˆ†ï¼‰</button>
            </div>
        </div>

        <button class="category-toggle" onclick="toggleCategory('cat-yomogi')">
            <span>ã‚ˆã‚‚ãè’¸ã— <span class="selection-badge">é¸æŠä¸­</span></span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="cat-yomogi" class="category-content">
            <div class="sub-label">ğŸ”¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ã‚ˆã‚‚ãè’¸ã—ï¼ˆ40åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">å…¨èº«ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚±ã‚¢ã‚³ãƒ¼ã‚¹ï¼ˆ160åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">æ¸©æ´»å¼•ãç· ã‚ãƒœãƒ‡ã‚£ãƒ¼ã‚³ãƒ¼ã‚¹ï¼ˆ120åˆ†ï¼‰</button>
            </div>
            <div class="sub-label">ğŸ”¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ20åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ60åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è¶³ãƒ„ãƒœï¼ˆ15åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ•ãƒƒãƒˆãƒªãƒ•ãƒ¬ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ç‚­é…¸è¶³æ¹¯ï¼†è„šãƒªãƒ³ãƒ‘ï¼ˆ50åˆ†ï¼‰</button>
            </div>
        </div>

        <button class="category-toggle" onclick="toggleCategory('cat-mens')">
            <span>ãƒ¡ãƒ³ã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼ <span class="selection-badge">é¸æŠä¸­</span></span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="cat-mens" class="category-content">
            <div class="sub-label">ğŸ”¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ãƒ¡ãƒ³ã‚ºã‚³ãƒ¼ã‚¹ï¼ˆ120åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ˜ãƒƒãƒ‰ï¼†ã‚‚ã¿ã»ãã—ã‚³ãƒ¼ã‚¹ï¼ˆ110åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è‡ªç”±ã«ã‚»ãƒ¬ã‚¯ãƒˆã‚³ãƒ¼ã‚¹ï¼ˆ120åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">æ¸©æ´»ã‚‚ã¿ã»ãã—ã‚³ãƒ¼ã‚¹</button>
                <button type="button" onclick="toggleSelection(this)">ã‚ˆã‚‚ãè’¸ã—ï¼ˆ40åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ50åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ç‚­é…¸è¶³æ¹¯ï¼†è„šãƒªãƒ³ãƒ‘ï¼ˆ90åˆ†ï¼‰</button>
            </div>
            <div class="sub-label">ğŸ”¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒ‰ãƒ©ã‚¤ãƒ˜ãƒƒãƒ‰ã‚¹ãƒ‘ï¼ˆ20åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ60åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚‚ã¿ã»ãã—ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ã‚ˆã‚‚ãè’¸ã—ï¼ˆ40åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è„šãƒªãƒ³ãƒ‘ï¼ˆ30åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">è¶³ãƒ„ãƒœï¼ˆ15åˆ†ï¼‰</button>
            </div>
        </div>

        <button class="category-toggle" onclick="toggleCategory('cat-pair')">
            <span>ãƒšã‚¢ã‚³ãƒ¼ã‚¹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ <span class="selection-badge">é¸æŠä¸­</span></span>
            <i class="fas fa-chevron-down"></i>
        </button>
        <div id="cat-pair" class="category-content">
            <div class="sub-label">ğŸ”¹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®</div>
            <div class="menu-buttons">
                <button type="button" onclick="toggleSelection(this)">ã‚ˆã‚‚ãè’¸ã—ï¼ˆ40åˆ†ï¼‰</button>
                <button type="button" onclick="toggleSelection(this)">ãƒšã‚¢ã‚³ãƒ¼ã‚¹ï¼ˆ100åˆ†ï¼‰</button>
            </div>
        </div>

        <div class="labelkibounitizi" id="kibou1">å¸Œæœ›æ—¥æ™‚<span class="required">å¿…é ˆ</span></div>
        <div class="datetime-wrapper">
            <span class="placeholder">â‡©ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠâ‡©</span>
            <div class="dt-grid">
                <select id="date1_day" class="datetime-input" onchange="updateDisplayInfo()"></select>
                <select id="date1_time" class="datetime-input" onchange="updateDisplayInfo()">
                    <option value="" disabled selected>æ™‚é–“å¸¯</option>
                    <option value="åˆå‰">åˆå‰</option>
                    <option value="åˆå¾Œ">åˆå¾Œ</option>
                </select>
            </div>
        </div>

        <div class="labelkibounitizi" id="kibou2">ç¬¬äºŒå¸Œæœ›æ—¥æ™‚<span class="required">å¿…é ˆ</span></div>
        <div class="datetime-wrapper">
            <span class="placeholder">â‡©ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠâ‡©</span>
            <div class="dt-grid">
                <select id="date2_day" class="datetime-input" onchange="updateDisplayInfo()"></select>
                <select id="date2_time" class="datetime-input" onchange="updateDisplayInfo()">
                    <option value="" disabled selected>æ™‚é–“å¸¯</option>
                    <option value="åˆå‰">åˆå‰</option>
                    <option value="åˆå¾Œ">åˆå¾Œ</option>
                </select>
            </div>
        </div>

        <div class="labelkibounitizi" id="kibou3">ç¬¬ä¸‰å¸Œæœ›æ—¥æ™‚<span class="required">å¿…é ˆ</span></div>
        <div class="datetime-wrapper">
            <span class="placeholder">â‡©ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠâ‡©</span>
            <div class="dt-grid">
                <select id="date3_day" class="datetime-input" onchange="updateDisplayInfo()"></select>
                <select id="date3_time" class="datetime-input" onchange="updateDisplayInfo()">
                    <option value="" disabled selected>æ™‚é–“å¸¯</option>
                    <option value="åˆå‰">åˆå‰</option>
                    <option value="åˆå¾Œ">åˆå¾Œ</option>
                </select>
            </div>
        </div>

        <div class="labelmessezi">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸<br><span style="font-size:0.8em">ï¼ˆè³ªå•ç­‰ãŠæ°—è»½ã«ã”è¨˜å…¥ãã ã•ã„ï¼‰</span></div>
        <textarea id="message" rows="4" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" oninput="updateDisplayInfo()"></textarea>

        <div class="labeltyuuou">ã”äºˆç´„å†…å®¹ç¢ºèª</div>
        <div id="displayInfo">
            </div>

        <button class="submit-button" onclick="submitForm()">äºˆç´„ã‚’è¡Œã†</button>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script>
        // LIFFåˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function () {
            liff.init({
                liffId: '2005254357-zKma9BZk' 
            }).then(() => {
                console.log('LIFF OK');
            }).catch((err) => {
                console.log('LIFF Error', err);
            });

            // æ—¥ä»˜é¸æŠè‚¢ã®ç”Ÿæˆ
            buildDateOptions('date1_day');
            buildDateOptions('date2_day');
            buildDateOptions('date3_day');
            
            // åˆå›è¡¨ç¤ºæ›´æ–°
            updateDisplayInfo();
        });

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®é–‹é–‰åˆ¶å¾¡
        function toggleCategory(id) {
            const content = document.getElementById(id);
            const button = document.querySelector(`button[onclick="toggleCategory('${id}')"]`);
            const icon = button.querySelector('i');

            if (content.style.display === "block") {
                content.style.display = "none";
                button.classList.remove("active-accordion");
                icon.className = "fas fa-chevron-down";
            } else {
                content.style.display = "block";
                button.classList.add("active-accordion");
                icon.className = "fas fa-chevron-up";
            }
        }

        // æ—¥ä»˜ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ—¥æ›œæ—¥ã‚’é™¤å¤–ï¼‰
        function buildDateOptions(elementId) {
            const select = document.getElementById(elementId);
            select.innerHTML = '<option value="" disabled selected>æ—¥ä»˜ã‚’é¸æŠ</option>';
            const today = new Date();
            const jpWeek = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];

            for (let i = 1; i <= 60; i++) { // å‘ã“ã†60æ—¥åˆ†
                const d = new Date(today);
                d.setDate(today.getDate() + i);
                
                const wd = d.getDay();
                if (wd === 0) continue; // æ—¥æ›œå®šä¼‘

                const y = d.getFullYear();
                const m = ('0' + (d.getMonth() + 1)).slice(-2);
                const day = ('0' + d.getDate()).slice(-2);
                const val = `${y}-${m}-${day}`;
                const txt = `${m}/${day}ï¼ˆ${jpWeek[wd]}ï¼‰`;

                const opt = document.createElement('option');
                opt.value = val;
                opt.textContent = txt;
                select.appendChild(opt);
            }
        }

        // æ¥åº—å›æ•°é¸æŠ
        let visitStatus = '';
        function selectVisit(btn) {
            const siblings = btn.parentNode.querySelectorAll('button');
            siblings.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            visitStatus = btn.textContent;
            updateDisplayInfo();
        }

        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒˆã‚°ãƒ«é¸æŠ
        function toggleSelection(btn) {
            btn.classList.toggle('active');
            
            // â–¼ ã“ã“ãŒè¿½åŠ ï¼šã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒœã‚¿ãƒ³ã®è¦‹ãŸç›®ã‚’æ›´æ–°ã™ã‚‹ â–¼
            checkCategorySelection(btn);

            updateDisplayInfo();
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼å†…ã®é¸æŠçŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€è¦ªãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰ãˆã‚‹é–¢æ•°
        function checkCategorySelection(btn) {
            // è¦ªã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã‚’æ¢ã™
            const contentDiv = btn.closest('.category-content');
            if (!contentDiv) return;

            const categoryId = contentDiv.id; 
            // ãã®IDã«å¯¾å¿œã™ã‚‹ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã‚’æ¢ã™
            const toggleBtn = document.querySelector(`button[onclick="toggleCategory('${categoryId}')"]`);

            // ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«ã€Œactiveã€ãªãƒœã‚¿ãƒ³ãŒ1ã¤ã§ã‚‚ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            const hasActive = contentDiv.querySelectorAll('.menu-buttons button.active').length > 0;

            if (hasActive) {
                toggleBtn.classList.add('has-selection');
            } else {
                toggleBtn.classList.remove('has-selection');
            }
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç”¨
        function scrollToElement(id) {
            const el = document.getElementById(id);
            if(el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // è¡¨ç¤ºå†…å®¹ã®æ›´æ–°
        function updateDisplayInfo() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            
            // é¸æŠã•ã‚ŒãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åé›†
            const selectedButtons = document.querySelectorAll('.menu-buttons button.active');
            let menuList = [];
            let totalTime = 0;

            selectedButtons.forEach(btn => {
                const text = btn.textContent;
                menuList.push(text);
                
                const match = text.match(/(\d+)åˆ†/);
                if (match) {
                    totalTime += parseInt(match[1], 10);
                }
            });

            // æ™‚é–“è¨ˆç®—
            let timeStr = "";
            if (totalTime > 0) {
                const h = Math.floor(totalTime / 60);
                const m = totalTime % 60;
                timeStr = h > 0 ? `${h}æ™‚é–“${m}åˆ†` : `${m}åˆ†`;
            }

            // æ—¥æ™‚å–å¾—
            const d1 = getDateStr('date1');
            const d2 = getDateStr('date2');
            const d3 = getDateStr('date3');

            // HTMLç”Ÿæˆ
            let html = '';

            // ãŠåå‰ãƒ»é›»è©±
            html += `<div class="info-row"><div class="info-label">ã€ãŠå®¢æ§˜æƒ…å ±ã€‘</div>`;
            html += `ãŠåå‰ï¼š${name || '<span style="color:#aaa">æœªå…¥åŠ›</span>'}<br>`;
            html += `é›»è©±ç•ªå·ï¼š${phone || '<span style="color:#aaa">æœªå…¥åŠ›</span>'}`;
            html += `<button class="edit-button" onclick="scrollToElement('lbl_name')">ä¿®æ­£</button></div>`;

            // æ¥åº—å›æ•°
            html += `<div class="info-row"><div class="info-label">ã€æ¥åº—å›æ•°ã€‘</div>`;
            html += `${visitStatus || '<span style="color:red">æœªé¸æŠ</span>'}`;
            html += `<button class="edit-button" onclick="scrollToElement('lbl_visit')">ä¿®æ­£</button></div>`;

            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼
            html += `<div class="info-row"><div class="info-label">ã€é¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€‘</div>`;
            if (menuList.length > 0) {
                html += `<ul style="margin:5px 0 5px 20px; padding:0;">`;
                menuList.forEach(m => html += `<li>${m}</li>`);
                html += `</ul>`;
                if(timeStr) {
                    html += `<strong>ç›®å®‰æ‰€è¦æ™‚é–“ï¼š${timeStr}</strong>`;
                }
            } else {
                html += `<span style="color:red">æœªé¸æŠ</span>`;
            }
            html += `<button class="edit-button" onclick="scrollToElement('lbl_menu')">ä¿®æ­£</button></div>`;

            // å¸Œæœ›æ—¥æ™‚
            html += `<div class="info-row"><div class="info-label">ã€å¸Œæœ›æ—¥æ™‚ã€‘</div>`;
            html += `ç¬¬ä¸€ï¼š${d1 || '<span style="color:red">æœªé¸æŠ</span>'}<br>`;
            html += `ç¬¬äºŒï¼š${d2 || '<span style="color:#aaa">æœªé¸æŠ</span>'}<br>`;
            html += `ç¬¬ä¸‰ï¼š${d3 || '<span style="color:#aaa">æœªé¸æŠ</span>'}`;
            html += `<button class="edit-button" onclick="scrollToElement('kibou1')">ä¿®æ­£</button></div>`;

            document.getElementById('displayInfo').innerHTML = html;
        }

        function getDateStr(baseId) {
            const day = document.getElementById(baseId + '_day').value;
            const time = document.getElementById(baseId + '_time').value;
            if (!day || !time) return '';
            const dateParts = day.split('-');
            return `${dateParts[1]}/${dateParts[2]} ${time}`;
        }

        // é€ä¿¡å‡¦ç†
        function submitForm() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const menuBtns = document.querySelectorAll('.menu-buttons button.active');
            const d1_day = document.getElementById('date1_day').value;
            const d1_time = document.getElementById('date1_time').value;
            const message = document.getElementById('message').value;

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (!name) { alert('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
            if (!phone) { alert('é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
            if (!visitStatus) { alert('æ¥åº—å›æ•°ã‚’é¸æŠã—ã¦ãã ã•ã„'); return; }
            if (menuBtns.length === 0) { alert('ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’1ã¤ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„'); return; }
            if (!d1_day || !d1_time) { alert('ç¬¬ä¸€å¸Œæœ›æ—¥æ™‚ã¯å¿…é ˆã§ã™'); return; }

            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒªã‚¹ãƒˆä½œæˆ
            let menuText = "";
            menuBtns.forEach(btn => {
                menuText += `ãƒ»${btn.textContent}\n`;
            });

            // æ—¥æ™‚ãƒ†ã‚­ã‚¹ãƒˆä½œæˆ
            const d1 = d1_day ? `${d1_day} ${d1_time}` : "æŒ‡å®šãªã—";
            const d2 = document.getElementById('date2_day').value ? `${document.getElementById('date2_day').value} ${document.getElementById('date2_time').value}` : "ãªã—";
            const d3 = document.getElementById('date3_day').value ? `${document.getElementById('date3_day').value} ${document.getElementById('date3_time').value}` : "ãªã—";

            // é€ä¿¡ãƒ†ã‚­ã‚¹ãƒˆ
            const sendText = `ã€äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã€‘\n\n`
                + `[ãŠåå‰]\n${name}\n\n`
                + `[é›»è©±ç•ªå·]\n${phone}\n\n`
                + `[æ¥åº—å›æ•°]\n${visitStatus}\n\n`
                + `[å¸Œæœ›ãƒ¡ãƒ‹ãƒ¥ãƒ¼]\n${menuText}\n`
                + `[å¸Œæœ›æ—¥æ™‚]\nç¬¬ä¸€ï¼š${d1}\nç¬¬äºŒï¼š${d2}\nç¬¬ä¸‰ï¼š${d3}\n\n`
                + `[ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]\n${message}`;

            // LINEé€ä¿¡
            if (!liff.isInClient()) {
                alert('LINEã‚¢ãƒ—ãƒªå†…ã§é–‹ã„ã¦ãã ã•ã„ã€‚\n\né€ä¿¡å†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:\n' + sendText);
            } else {
                liff.sendMessages([{
                    type: 'text',
                    text: sendText
                }]).then(() => {
                    liff.closeWindow();
                }).catch((err) => {
                    alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n' + err);
                });
            }
        }
    </script>
</body>

</html>